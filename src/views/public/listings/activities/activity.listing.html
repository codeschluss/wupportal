<main>
  <header>
    <mat-form-field>
      <mat-label>
        <icon-component icon="city"></icon-component>
        <i18n i18n="@@suburbs">suburbs</i18n>
      </mat-label>
      <mat-select multiple [formControl]="suburbCtrl">
        <ng-container *ngFor="let item of suburbs">
          <mat-option [value]="item.id">
            {{ item.name }}
          </mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>
        <icon-component icon="users"></icon-component>
        <i18n i18n="@@targetGroups">targetGroups</i18n>
      </mat-label>
      <mat-select multiple [formControl]="targetGroupCtrl">
        <ng-container *ngFor="let item of targetGroups">
          <mat-option [value]="item.id">
            {{ item.name }}
          </mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>
    <mat-chip-list multiple selectable>
      <ng-container *ngFor="let item of categories; let i = index">
        <mat-chip
          #chip="matChip"
          class="mat-body"
          [style.borderColor]="item.color"
          [style.backgroundColor]="item.color"
          [style.color]="chip.selected ? color(item.color) : null"
          [style.display]="blank && i > 5 ? 'none' : null"
          [value]="item.id"
          (click)="chip.toggleSelected()">
          {{ item.name }}
        </mat-chip>
      </ng-container>
      <mat-chip
        #chip="matChip"
        class="mat-body"
        [style.display]="blank || categories.length < 5 ? null : 'none'"
        (click)="blank = false">
        <icon-component icon="ellipsis-h"></icon-component>
      </mat-chip>
    </mat-chip-list>
  </header>
  <section>
    <aside>
      <div><iframe #frame src="/mapview?embed=true"></iframe></div>
    </aside>
    <nav>
      <ng-container *ngIf="(results | async) === false">
        <icon-component icon="frown"></icon-component>
        <strong class="mat-title">
          <i18n i18n="@@notFoundError">notFoundError</i18n>
        </strong>
      </ng-container>
      <ng-container *ngFor="let item of items | async">
        <activity-card
          [item]="item"
          (mouseenter)="focus(item, $event)"
          (mouseleave)="focus(item, $event)">
        </activity-card>
      </ng-container>
      <ng-container *ngIf="next || prev">
        <pager-component [next]="next" [prev]="prev"></pager-component>
      </ng-container>
    </nav>
  </section>
</main>
