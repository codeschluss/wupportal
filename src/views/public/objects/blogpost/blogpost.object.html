<main>
  <h2 class="mat-headline">
    {{ item.name }}
    <small>
      <i18n i18n="@@by">by</i18n>
      {{ item.author }}
      <ng-container *ngIf="item.activity">
        <i18n i18n="@@about">about</i18n>
        <a [routerLink]="['/', 'activities', item.activity.id]">
          {{ item.activity.name }}
        </a>
      </ng-container>
    </small>
  </h2>
  <mat-divider></mat-divider>
  <nav>
    <share-piece [item]="item"></share-piece>
    <like-piece [item]="item"></like-piece>
    <span [style.flexGrow]="1"></span>
    <time-piece [item]="item"></time-piece>
  </nav>
  <mat-divider></mat-divider>
  <section>
    <marked-compat [data]="item.content"></marked-compat>
    <ng-container *ngIf="item.activity">
      <aside>
        <expand-compat #activity (changed)="$event && expanded(activity)">
          <ng-template #expandHeader>
            <icon-compat icon="map-marker-alt"></icon-compat>
            <i18n i18n="@@activity">activity</i18n>
          </ng-template>
          <ng-template #expandContent>
            <activity-card [item]="item.activity"></activity-card>
          </ng-template>
        </expand-compat>
      </aside>
    </ng-container>
  </section>
</main>
